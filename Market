using System;
using System.Collections.Generic;

namespace SuperMarket
{
    class Market
    {
        private int _money;
        private Queue<Buyer> _buyers;
        private Random _buyerMoney;

        public Buyer CurrentBuyer { get; private set; }
        public int BuyersCount { get; private set; }

        public Market()
        {
            _money = 0;
            _buyers = new Queue<Buyer>();
            _buyerMoney = new Random();
        }

        public void AddBuyers(int queueLenght)
        {
            for (int i = 0; i < queueLenght; i++)
            {
                _buyers.Enqueue(new Buyer(_buyerMoney.Next(1000, 3000)));
            }

            BuyersCount = queueLenght;
        }

        public Buyer SelectCurentBuyer()
        {
            CurrentBuyer = _buyers.Peek();
            CurrentBuyer.TakeProductInCart();
            return CurrentBuyer;
        }

        public void CalculateBuyer(int money)
        {
            _money += money;
            _buyers.Dequeue();
            BuyersCount = _buyers.Count;
            Console.WriteLine("Людей в очереди осталось - " + BuyersCount);
        }
    }
}
